{"version":3,"sources":["app.js","controller/contactCtrl.js","controller/dataCtrl.js","controller/mainCtrl.js","controller/usersCtrl.js","service/contactSrv.js","service/dataSrv.js","service/mainSrv.js","service/usersSrv.js"],"names":["angular","module","config","$stateProvider","$urlRouterProvider","when","state","url","templateUrl","controller","$scope","$http","$timeout","$interval","uiGridConstants","uiGridGroupingConstants","dataSrv","gridApi","gridOptions","enableCellEditOnFocus","enableColumnResizing","enableFiltering","enableGridMenu","infiniteScrollRowsFromEnd","infiniteScrollUp","infiniteScrollDown","onRegisterApi","registeredApi","enableRowSelection","expandableRowTemplate","expandableRowHeight","receivePatients","getPatients","then","response","data","i","length","receiveVisits","id","getVisits","subGridOptions","toggleFilterRow","core","notifyDataChange","dataChange","COLUMN","callsPending","refreshData","myData","start","Date","sec","get","success","forEach","row","registered","push","error","timeout","cancel","left","$on","mainSrv","weather","service","method","addNewPatient","addNewVisit","changePatient","changeVisit","removePatient","removeVisit","getWeather","weatherZipCode","weatherAPI","res"],"mappings":"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","file":"bundle.js","sourcesContent":["angular.module('app', ['ui.router', 'ngTouch', 'ui.grid', 'ui.grid.cellNav', 'ui.grid.edit', 'ui.grid.resizeColumns', 'ui.grid.pinning', 'ui.grid.selection', 'ui.grid.moveColumns', 'ui.grid.exporter', 'ui.grid.importer', 'ui.grid.grouping', 'ui.grid.infiniteScroll', 'ui.grid.expandable'])\n    .config(function($stateProvider, $urlRouterProvider) {\n        $urlRouterProvider.when('', '/');\n\n        $stateProvider\n            .state('home', {\n                url: '/',\n                templateUrl: './views/home.html'\n            })\n            .state('users', {\n                url: '/users',\n                templateUrl: './views/users.html'\n            })\n            .state('patient', {\n                url: '/patient',\n                templateUrl: './views/addPatient.html'\n            })\n            .state('data', {\n                url: '/data',\n                templateUrl: './views/data.html',\n                controller: 'dataCtrl'\n            })\n            .state('location', {\n                url: 'location',\n                templateUrl: './views/location.html'\n            })\n    })","","angular.module('app').controller('dataCtrl', function($scope, $http, $timeout, $interval, uiGridConstants, uiGridGroupingConstants, dataSrv) {\n\n    var gridApi;\n\n    $scope.gridOptions = {\n        enableCellEditOnFocus: true,\n        enableColumnResizing: true,\n        enableFiltering: true,\n        enableGridMenu: true,\n        infiniteScrollRowsFromEnd: 25,\n        infiniteScrollUp: true,\n        infiniteScrollDown: true,\n        onRegisterApi: function onRegisterApi(registeredApi) {\n            gridApi = registeredApi;\n        },\n        enableRowSelection: true,\n        expandableRowTemplate: './views/expandableRow.html',\n        expandableRowHeight: 150\n    };\n    $scope.receivePatients = () => {\n        dataSrv.getPatients().then((response) => {\n            $scope.gridOptions.data = response.data;\n            for (var i = 0; i < response.data.length; i++) {\n                $scope.receiveVisits(response.data[i].id, i)\n            }\n        })\n    }\n    $scope.receivePatients();\n\n    $scope.receiveVisits = (id, i) => {\n        dataSrv.getVisits(id).then((response) => {\n            $scope.gridOptions.data[i].subGridOptions = {\n                data: response.data\n            };\n        })\n    }\n\n    $scope.toggleFilterRow = function() {\n        $scope.gridOptions.enableFiltering = !$scope.gridOptions.enableFiltering;\n        gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN);\n    };\n\n    $scope.callsPending = 0;\n\n    var i = 0;\n    $scope.refreshData = function() {\n        $scope.myData = [];\n\n        var start = new Date();\n        var sec = $interval(function() {\n            $scope.callsPending++;\n\n            $http.get('/api/getPatients')\n                .success(function(data) {\n                    $scope.callsPending--;\n\n                    data.forEach(function(row) {\n                        row.id = i;\n                        i++;\n                        row.registered = new Date(row.registered)\n                        $scope.myData.push(row);\n                    });\n                })\n                .error(function() {\n                    $scope.callsPending--\n                });\n        }, 200, 10);\n\n\n        var timeout = $timeout(function() {\n            $interval.cancel(sec);\n            $scope.left = '';\n        }, 2000);\n\n        $scope.$on('$destroy', function() {\n            $timeout.cancel(timeout);\n            $interval.cancel(sec);\n        });\n    };\n\n});","angular.module('app').controller('mainCtrl', function($scope, mainSrv) {\n    $scope.weather = mainSrv.weather\n})","","","angular.module('app').service('dataSrv', function($http) {\n\n    this.getPatients = () => {\n            return $http({\n                url: '/api/getPatients',\n                method: 'GET'\n            })\n        },\n        this.getVisits = (id) => {\n            return $http({\n                url: `/api/getVisits/${id}`,\n                method: 'GET'\n            })\n        },\n        this.addNewPatient = () => {\n            return $http({\n                url: '/api/addNewPatient',\n                method: 'POST'\n            })\n        },\n        this.addNewVisit = (id) => {\n            return $http({\n                url: `/api/addNewVisit/${id}`,\n                method: 'POST'\n            })\n        },\n        this.changePatient = (id) => {\n            return $http({\n                url: `/api/updatePatient/${id}`,\n                method: 'PUT'\n            })\n        },\n        this.changeVisit = (id) => {\n            return $http({\n                url: `/api/updateVisit/${id}`,\n                method: 'PUT'\n            })\n        },\n        this.removePatient = (id) => {\n            return $http({\n                url: `api/deletePatient/${id}`,\n                method: 'DELETE'\n            })\n        },\n        this.removeVisit = (id) => {\n            return $http({\n                url: `api/deleteVisit/${id}`,\n                method: 'DELETE'\n            })\n        }\n})","angular.module('app').service('mainSrv', function($http) {\n    let getWeather = () => {\n        return $http({\n            method: 'get',\n            url: `api.openweathermap.org/data/2.5/weather?zip=${config.weatherZipCode},us&APPID=${config.weatherAPI}`\n        }).then((res) => {\n            this.weather = res.data;\n        })\n    };\n})",""]}